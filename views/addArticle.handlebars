{{>header}}


<script src="../js/jquery-3.1.1.js"></script>
<!-- Bootstrap core CSS -->
<link href="../uppage/css/bootstrap.css" rel="stylesheet">
<link href="../uppage/css/font-awesome.css" rel="stylesheet">
<!--  <link href="../uppage/css/style.css" rel="stylesheet">  -->
<link href="../uppage/css/style-responsive.css" rel="stylesheet">

<!-- 配置文件 -->
<script type="text/javascript" src="../uppage/ueditor/ueditor.config.js"></script>
<!-- 编辑器源码文件 -->
<script type="text/javascript" src="../uppage/ueditor/ueditor.all.js"></script>
<script type="text/javascript" src="../js/config.js"></script>

<div class="container">
    <section id="container">
        <section id="main-content">

            <section class="wrapper">
                <p style="font-family:Arial ;font-size: 40px; text-align:center">MY ARTICLE</p>

                <form onsubmit="return false">
                    <div class="form-group">
                        <label for="article-title" class="col-sm-1 control-label">Title</label>
                        <div class="col-sm-11">
                            <input type="text" class="form-control" id="article-title" placeholder="Title" name="title">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="article-categories" class="col-sm-1 control-label">Categories</label>
                        <div class="col-sm-11">
                            <input type="text" class="form-control" id="article-categories" placeholder="Categories"
                            name="categories">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="ueditor" class="col-sm-1 control-label">Content</label>
                        <div class="col-sm-11" >
                            <script id="ueditor" name="content" type="text/plain" >
                            </script>
                        </div>
                    </div>
                    <br>
                    <button style="float:right;margin-right:20px;margin-top:20px" class="btn btn-default" onclick="addArticle()">发表文章</button>

                </form>
                <script language="javascript">

                function addArticle() {
                    $.ajax({
                        type:'post',
                        url:'/submit',
                        data:{
                            title: $('#article-title').val(),
                            categories: $('#article-categories').val(),
                            content: ue.getContent()
                        },
                        success: function (data) {
                            if(data == 'success')
                            {
                                alert("发布成功");
                                location.href = DEFAULT.route+'/home';
                            }else if (data == 'error') {
                                location.href = DEFAULT.route+'/error';
                            }else {
                                location.href = DEFAULT.route+'/signin';
                            }
                        }
                    });

                }
                </script>
            </section>
        </section>
    </section>
</div>
<!-- js placed at the end of the document so the pages load faster -->
<script src="../uppage/js/jquery.js"></script>
<script src="../uppage/js/bootstrap.min.js"></script>
<script src="../uppage/js/jquery-ui-1.9.2.custom.min.js"></script>
<script src="../uppage/js/jquery.ui.touch-punch.min.js"></script>
<script class="include" type="text/javascript" src="../uppage/js/jquery.dcjqaccordion.2.7.js"></script>
<script src="../uppage/js/jquery.scrollTo.min.js"></script>
<script src="../uppage/js/jquery.nicescroll.js" type="text/javascript"></script>


<!--common script for all pages-->
<script src="../uppage/js/common-scripts.js"></script>

<script type="text/javascript">
var ue = UE.getEditor('ueditor');


</script>

{{>footer}}
